# Aliconcon E-commerce - Project Context
> Auto-generated by `/save-context` workflow. Äá»c báº±ng `/load-context`.

## Project Overview
- **Monorepo** vá»›i cÃ¡c module: `server`, `client-customer`, `client-shop`, `client-admin`, `server-mcp`, `client-mcp`
- **Tech**: Bun runtime, TypeScript
- **Server**: Elysia.js, MongoDB, Redis
- **Client-Customer**: Next.js 15, TailwindCSS, shadcn/ui
- **Client-Shop**: Next.js, TailwindCSS
- **Infra**: Docker Compose cho dev environment

## Latest Changes

### [2026-02-12 14:26] Auth Configuration Refactoring
**Files:** `server/src/configs/auth.config.ts`, `server/src/api/controllers/auth.controller.ts`
**What:** Centralized `CLIENT_URL` in `auth.config.ts`. Refactored `AuthController` to use the new config instead of hardcoded fallbacks.
**Status:** âœ… Done

### [2026-02-12 12:23] Context Workflows Created
**Files:** `.agent/workflows/save-context.md`, `.agent/workflows/load-context.md`, `.project-context.md`
**What:** Táº¡o workflow `/save-context` vÃ  `/load-context` Ä‘á»ƒ lÆ°u/load context nhanh má»—i phiÃªn. Táº¡o `.project-context.md` chá»©a tráº¡ng thÃ¡i dá»± Ã¡n
**Status:** âœ… Done

### [2026-02-12 09:52] Google Avatar Fix
**Files:** `client-customer/lib/utils.ts`, `client-customer/next.config.mjs`, `client-customer/components/ProfileBox`
**What:** Fix Google avatar khÃ´ng render - cáº­p nháº­t `getMediaUrl` Ä‘á»ƒ handle absolute URLs, thÃªm `lh3.googleusercontent.com` vÃ o next config
**Status:** âœ… Done

### [2026-02-11 14:00] Openrouteservice Type Fix
**Files:** `client-customer/openrouteservice-js.d.ts`
**What:** Táº¡o declaration file cho module `openrouteservice-js` Ä‘á»ƒ fix TypeScript error
**Status:** âœ… Done

### [2026-02-11 09:00] Docker Setup
**Files:** `docker-compose.yml`, `server/Dockerfile`, `server-mcp/Dockerfile`, `client-mcp/Dockerfile`
**What:** Dockerize server vÃ  MCP vá»›i Bun runtime, setup Docker Compose vá»›i MongoDB + Redis
**Status:** âœ… Done

### [2026-02-10 13:30] Migration Formatting Fix
**Files:** Server migration files, `.agent/workflows/create-migration.md`
**What:** Fix formatting migration files cho Phinx
**Status:** âœ… Done

### [2026-02-09 15:00] Refactor Employee Avatar
**Files:** Server migrations, seeders
**What:** Äá»•i `avatar` string â†’ `avatar_file_id` FK tá»›i `files` table
**Status:** âœ… Done

---

## Current Module State

| Module | Tech | Status | Notes |
|--------|------|--------|-------|
| `server` | Elysia.js + Bun + MongoDB | ğŸŸ¢ Active | API chÃ­nh, cÃ³ Docker |
| `client-customer` | Next.js 15 + Tailwind | ğŸŸ¢ Active | App khÃ¡ch hÃ ng, Google OAuth |
| `client-shop` | Next.js + Tailwind | ğŸŸ¡ Partial | App cho shop |
| `client-admin` | Next.js | ğŸ”´ Not started | Admin panel |
| `server-mcp` | Bun | ğŸŸ¢ Active | MCP server, cÃ³ Docker |
| `client-mcp` | Bun | ğŸŸ¢ Active | MCP client, cÃ³ Docker |

## Active Issues
- ğŸ”´ **Vercel 404**: Deploy thÃ nh cÃ´ng nhÆ°ng truy cáº­p trang bá»‹ 404. **Update**: ÄÃ£ Ä‘á»•i Framework Preset sang Next.js vÃ  Root Directory sang `client-customer`, Ä‘ang chá» redeploy hoÃ n táº¥t.

## Next Steps
- [ ] Checkout flow cho client-customer
- [ ] Auth system hoÃ n chá»‰nh
- [ ] Client-admin development
- [ ] Client-shop tiáº¿p tá»¥c phÃ¡t triá»ƒn

## Key Directories
```
aliconcon-ecommerce/
â”œâ”€â”€ server/src/api/          # API routes & controllers
â”œâ”€â”€ server/src/configs/      # Server configs
â”œâ”€â”€ client-customer/app/     # Next.js pages
â”œâ”€â”€ client-customer/components/ # React components
â”œâ”€â”€ client-customer/lib/     # Utilities & helpers
â”œâ”€â”€ client-shop/             # Shop client app
â”œâ”€â”€ client-admin/            # Admin client app
â”œâ”€â”€ server-mcp/              # MCP server
â”œâ”€â”€ client-mcp/              # MCP client
â”œâ”€â”€ docker-compose.yml       # Docker orchestration
â””â”€â”€ .agent/workflows/        # Agent workflows
```

## Commands
```bash
# Dev
cd server && bun run dev          # Start server
cd client-customer && bun run dev # Start customer app
docker compose up -d              # Start with Docker

# Database
cd server && bun run migrate      # Run migrations
cd server && bun run seed         # Run seeders
```
